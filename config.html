<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>GSV-6CPU | ME-Me&szlig;systeme GmbH</title>
    <link rel="shortcut icon" href="images/favicon.ico"/>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/me_messsysteme.css" rel="stylesheet">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery.min.1.11.3.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/autobahn.min.js"></script>
    <script src="js/smoothie.js"></script>
    <script>

        // the WAMP session we'll be using
        //
        var session = null;
        var option1_last = "";
        var typingTimer = new Array();
        var modul_config = new Array();

        // die nummer soll spaeter durch eine aufzaehlung im array ersetzt werden, aber erst wenn das config caching des gsv programmiert ist
        var modul_config_element_count_for_complete_load = 34;
        var setFunctionsByID = {
            'ReadUserScale1': 'WriteUserScale1',
            'ReadUserScale2': 'WriteUserScale2',
            'ReadUserScale3': 'WriteUserScale3',
            'ReadUserScale4': 'WriteUserScale4',
            'ReadUserScale5': 'WriteUserScale5',
            'ReadUserScale6': 'WriteUserScale6',
            'ReadUserOffset1': 'WriteUserOffset1',
            'ReadUserOffset2': 'WriteUserOffset2',
            'ReadUserOffset3': 'WriteUserOffset3',
            'ReadUserOffset4': 'WriteUserOffset4',
            'ReadUserOffset5': 'WriteUserOffset5',
            'ReadUserOffset6': 'WriteUserOffset6',
            'DataRate': 'WriteDataRate'
        };
        var doneTypingInterval = 250;

        var loadTimeOut = 5000;
        var loadConfigTimer = null;

        var debug_div = null;

        Object.extend = function (destination, source) {
            for (var property in source) {
                if (source.hasOwnProperty(property)) {
                    destination[property] = source[property];
                }
            }
            return destination;
        }

        function check_isConfig_complete(args) {
            //console.log(args);
            //Array.prototype.push.apply(modul_config, args);
            //modul_config = $.extend({}, modul_config, args);
            //$.merge(modul_config,args);
            //console.log(Object.keys(modul_config).length);
            modul_config = Object.extend(modul_config, args);
            if (Object.keys(modul_config).length >= modul_config_element_count_for_complete_load) {
                // hide loading modal
                doneLoading();
            }
        }

        function setInputSuccess(inputName) {
            $('#' + inputName + '_value').tooltip('destroy');
            $('#' + inputName + '_value').popover('destroy');
            $('#' + inputName).removeClass("has-success has-warning has-error");
            $('#' + inputName + '_glyphicon').removeClass("glyphicon-ok glyphicon-warning-sign glyphicon-remove");

            $('#' + inputName).addClass("has-success");
            $('#' + inputName + '_glyphicon').addClass("glyphicon-ok");
        }

        function setInputWarning(inputName, notice) {
            $('#' + inputName + '_value').tooltip('destroy');
            $('#' + inputName + '_value').popover("destroy");
            if (typeof notice !== 'undefined') {
                //$('#' + inputName + '_value').prop('title', notice).tooltip('show');
                $('#' + inputName + '_value').popover({content: notice, placement: "top"}).popover("show");
            }
            $('#' + inputName).removeClass("has-success has-warning has-error");
            $('#' + inputName + '_glyphicon').removeClass("glyphicon-ok glyphicon-warning-sign glyphicon-remove");

            $('#' + inputName).addClass("has-warning");
            $('#' + inputName + '_glyphicon').addClass("glyphicon-warning-sign");
        }

        function setInputError(inputName, error) {
            //$('#' + inputName + '_value').tooltip('destroy');
            $('#' + inputName + '_value').popover('destroy');
            if (typeof error !== 'undefined') {
                $('#' + inputName + '_value').prop('title', error).tooltip('show');
                //$('#' + inputName + '_value').popover({content: error, placement: "top"}).popover("show");
            }
            $('#' + inputName).removeClass("has-success has-warning has-error");
            $('#' + inputName + '_glyphicon').removeClass("glyphicon-ok glyphicon-warning-sign glyphicon-remove");

            $('#' + inputName).addClass("has-error");
            $('#' + inputName + '_glyphicon').addClass("glyphicon-remove");
        }

        function onReceiveError(args) {
            //eventCnt += 1;
            debug_div.innerHTML = '<p>' + args[0] + '</p>' + debug_div.innerHTML;
        }

        function onGetInterface(args) {
            //console.log(args[0]);
            args = args[0];
            var channels = parseInt(args['anzahl_messwert-frame-objekte']) + 1;
            $('#activeChannels').html(channels);
            var ge_schreibschutz = $('#ge_schreibschutz');
            if (args['genereller_schreibschutz']) {
                ge_schreibschutz.html('<span class=\"label label-default label-warning\">aktiviert</span>');
            } else {
                ge_schreibschutz.html('<span class=\"label label-default label-success\">deaktiviert</span>');
            }
            var sp_schreibschutz = $('#sp_schreibschutz');
            if (args['schnittstellen_spezifischer_schreibschutz']) {
                sp_schreibschutz.html('<span class=\"label label-default label-warning\">aktiviert</span>');
            } else {
                sp_schreibschutz.html('<span class=\"label label-default label-success\">deaktiviert</span>');
            }
            var model_name = $('#model_name');
            model_name.html('<span class=\"label label-default label-primary\">' + args['geraete_model'] + '</span>');
            var measure_datatype = $('#measure_datatype');
            measure_datatype.html('<span class=\"label label-default label-primary\">' + args['messwertdatentype'] + '</span>');

            // push config data
            check_isConfig_complete(args);
        }

        function onGetReadInputType(args) {
            args = args[0];
            if (args[0] != 0) {
                console.log("Error rcv InputType");
                return
            }
            $('#' + 'ReadInputType' + args[1]).html((parseFloat(args[2])/100).toFixed(2) + ' mV/V');

            var data = {};
            data['ReadInputType' + args[1]] = parseFloat(args[2])/100;
            check_isConfig_complete(data);
        }

        function onGetReadUserScale(args) {
            args = args[0];
            if (args[0] != 0) {
                setInputError('ReadUserScale' + args[1], args[0])
                return
            }
            var inputID = 'ReadUserScale' + args[1];
            $('#' + inputID + '_value').val(parseFloat(args[2]).toFixed(4));
            setInputSuccess(inputID);

            //modul_config['ReadAoutScale'][args[1]] = args[2];
            var data = {};
            data['ReadUserScale' + args[1]] = parseFloat(args[2]);
            check_isConfig_complete(data);
        }
        function WriteUserScale1() {
            var scale = parseFloat($('#ReadUserScale1_value').val());
            session.call("de.me_systeme.gsv.WriteUserScale", [1, scale]);
        }
        function WriteUserScale2() {
            var scale = parseFloat($('#ReadUserScale2_value').val());
            session.call("de.me_systeme.gsv.WriteUserScale", [2, scale]);
        }
        function WriteUserScale3() {
            var scale = parseFloat($('#ReadUserScale3_value').val());
            session.call("de.me_systeme.gsv.WriteUserScale", [3, scale]);
        }
        function WriteUserScale4() {
            var scale = parseFloat($('#ReadUserScale4_value').val());
            session.call("de.me_systeme.gsv.WriteUserScale", [4, scale]);
        }
        function WriteUserScale5() {
            var scale = parseFloat($('#ReadUserScale5_value').val());
            session.call("de.me_systeme.gsv.WriteUserScale", [5, scale]);
        }
        function WriteUserScale6() {
            var scale = parseFloat($('#ReadUserScale6_value').val());
            session.call("de.me_systeme.gsv.WriteUserScale", [6, scale]);
        }
        function onWriteUserScale(args) {
            args = args[0];
            if (args[0] != 0) {
                //alert("cant set Zero");
                setInputError('ReadUserScale' + args[1]);
                var error = '';
                if (args[0] == 84) {
                    error = 'Der Absolutwert des Parameters ist zu gro√ü';
                } else if (args[0] == 85) {
                    error = 'Der Absolutwert des Parameters ist zu klein';
                } else {
                    error = 'Parameter nicht akzeptiert';
                }
                setInputError('ReadUserScale' + args[1], error);
                return
            }
            session.call("de.me_systeme.gsv.getReadUserScale", [args[1]]);
        }

        function onGetReadUserOffset(args) {
            args = args[0];
            if (args[0] != 0) {
                setInputError('ReadUserOffset' + args[1], args[0])
                return
            }
            var inputID = 'ReadUserOffset' + args[1];
            $('#' + inputID + '_value').val(parseFloat(args[2]).toFixed(4));
            setInputSuccess(inputID);

            //modul_config['ReadAoutScale'][args[1]] = args[2];
            var data = {};
            data['ReadUserOffset' + args[1]] = parseFloat(args[2]);
            check_isConfig_complete(data);
        }
        function WriteUserOffset1() {
            var scale = parseFloat($('#ReadUserOffset1_value').val());
            session.call("de.me_systeme.gsv.WriteUserOffset", [1, scale]);
        }
        function WriteUserOffset2() {
            var scale = parseFloat($('#ReadUserOffset2_value').val());
            session.call("de.me_systeme.gsv.WriteUserOffset", [2, scale]);
        }
        function WriteUserOffset3() {
            var scale = parseFloat($('#ReadUserOffset3_value').val());
            session.call("de.me_systeme.gsv.WriteUserOffset", [3, scale]);
        }
        function WriteUserOffset4() {
            var scale = parseFloat($('#ReadUserOffset4_value').val());
            session.call("de.me_systeme.gsv.WriteUserOffset", [4, scale]);
        }
        function WriteUserOffset5() {
            var scale = parseFloat($('#ReadUserOffset5_value').val());
            session.call("de.me_systeme.gsv.WriteUserOffset", [5, scale]);
        }
        function WriteUserOffset6() {
            var scale = parseFloat($('#ReadUserOffset6_value').val());
            session.call("de.me_systeme.gsv.WriteUserOffset", [6, scale]);
        }
        function onWriteUserOffset(args) {
            args = args[0];
            if (args[0] != 0) {
                //alert("cant set Zero");
                setInputError('ReadUserOffset' + args[1]);
                var error = '';
                if (args[0] == 84) {
                    error = 'Der Absolutwert des Parameters ist zu gro√ü';
                } else if (args[0] == 85) {
                    error = 'Der Absolutwert des Parameters ist zu klein';
                } else {
                    error = 'Parameter nicht akzeptiert';
                }
                setInputError('ReadUserOffset' + args[1], error);
                return
            }
            session.call("de.me_systeme.gsv.getReadUserOffset", [args[1]]);
        }

        function onGetUnitNo(args) {
            args = args[0];
            if (args[0] != 0) {
                setInputError('UnitNo' + args[2], args[1])
                return
            }
            var inputID = 'UnitNo' + args[2];
            $('#' + inputID + ' option')[args[3]].selected = true;
            setInputSuccess(inputID);

            //modul_config['ReadAoutScale'][args[1]] = args[2];

            var data = {};
            data['UnitNo' + args[2]] = parseInt(args[4]);
            check_isConfig_complete(data);
        }
        function onWriteUnitNo(args) {
            args = args[0];
            if (args[0] != 0) {
                //alert("cant set Zero");
                setInputError('UnitNo' + args[1]);
                var error = 'Parameter nicht akzeptiert: ' + args[2];
                setInputError('UnitNo' + args[1], error);
                return
            }
            session.call("de.me_systeme.gsv.getUnitNo", [args[1]]);
        }

        function onGetSerialNo(args) {
            args = args[0];
            if (args[0] != 0) {
                alert('can\'t get SerialNo');
                return
            }
            if (args[2] == '') {
                $('#serialNo').html('(leer)');
            } else {
                $('#serialNo').html(args[2]);
            }

            var data = {};
            data['SerialNo' + args[2]] = parseInt(args[4]);
            check_isConfig_complete(data);
        }

        function onGetDeviceHours(args) {
            var data = {};
            args = args[0];
            if (args[0] != 0) {
                $('#device_hours_counter').html(args[1]);
                data['DeviceHoursAbs'] = args[1];
                check_isConfig_complete(data);
                return
            }
            $('#device_hours_counter').html(args[2]);

            data['DeviceHoursAbs'] = parseInt(args[2]);
            check_isConfig_complete(data);
        }

        function onGetFirmwareVersion(args) {
            var data = {};
            args = args[0];
            if (args[0] != 0) {
                $('#device_fw_version').html(args[1]);
                data['DeviceFWversion'] = args[1];
                check_isConfig_complete(data);
                return
            }
            if (!Array.isArray(args[2])) {
                $('#device_fw_version').html("error");
                return;
            }
            var versionStr = 'Major: ' + args[2][0] + '  Minor:' + args[2][1];
            $('#device_fw_version').html(versionStr);

            data['DeviceFWversion'] = versionStr;
            check_isConfig_complete(data);
        }

        function onGetDataRate(args) {
            args = args[0];
            if (args[0] != 0) {
                setInputError('DataRate', args[1])
                return
            }
            $('#DataRate_value').val(parseFloat(args[2]).toFixed(2));
            setInputSuccess('DataRate');

            //modul_config['ReadAoutScale'][args[1]] = args[2];
            var data = {};
            data['DataRate'] = parseFloat(args[2]);
            check_isConfig_complete(data);
        }
        function WriteDataRate() {
            var dataRate = parseFloat($('#DataRate_value').val());
            session.call("de.me_systeme.gsv.WriteDataRate", [dataRate]);
        }
        function onWriteDataRate(args) {
            args = args[0];
            if (args[0] != 0) {
                setInputError('DataRate' + args[2]);
                return
            }
            session.call("de.me_systeme.gsv.getDataRate");
        }

        function WriteSaveAll() {
            if ($('#btn-saveAll').hasClass("disabled")) {
                return;
            }
            $('#btn-saveAll').addClass("disabled");
            $('#btn-saveAll').popover("destroy");
            $('#btn-saveAll').popover({content: 'wird √ºbertragen...', placement: "top"}).popover("show");
            session.call("de.me_systeme.gsv.WriteSaveAll");
        }
        function onWriteSaveAll(args) {
            args = args[0];
            $('#btn-saveAll').popover("destroy");
            if (args[0] != 0) {
                $('#btn-saveAll').prop('title', args[1]).tooltip('show');
                return
            }
            $('#btn-saveAll').prop('title', 'Speicherung erfolgreich.').tooltip('show');
            $('#btn-saveAll').removeClass("btn-warning disabled");
            $('#btn-saveAll').addClass("btn-success");
            setTimeout(function () {
                $('#btn-saveAll').tooltip("destroy");
                $('#btn-saveAll').removeClass("btn-success disabled");
                $('#btn-saveAll').addClass("btn-warning");
            }, 3500);
        }

        function onLoadConfigError() {
            $('#myPleaseWait').modal('hide');
            $('#errorModal').modal('show');
            session.call('de.me_systeme.gsv.resetAntwortQueue').then(function checkReset(res) {
                //alert(res);
                setTimeout(function () {
                    location.reload();
                }, 2000);
            }, session.log);
        }

        window.onload = function () {
            $('#myPleaseWait').modal('show');
            loadConfigTimer = setTimeout(onLoadConfigError, loadTimeOut);

            // the URL of the WAMP Router (e.g. Crossbar.io)
            //
            var wsuri;
            if (document.location.origin == "file://") {
                wsuri = "ws://localhost:8080/ws";
            } else {
                wsuri = "ws://" + document.location.hostname + ":8080/ws";
            }

            // connect to WAMP server
            //
            var connection = new autobahn.Connection({
                url: wsuri,
                realm: 'me_gsv6'
            });

            connection.onopen = function (new_session) {
                console.log("connected to " + wsuri);

                session = new_session;

                session.subscribe("de.me_systeme.gsv.onError", onReceiveError);
                session.subscribe("de.me_systeme.gsv.onGetInterface", onGetInterface);
                session.subscribe("de.me_systeme.gsv.onGetReadUserScale", onGetReadUserScale);
                session.subscribe("de.me_systeme.gsv.onWriteUserScale", onWriteUserScale);
                session.subscribe("de.me_systeme.gsv.onGetUnitNo", onGetUnitNo);
                session.subscribe("de.me_systeme.gsv.onWriteUnitNo", onWriteUnitNo);
                session.subscribe("de.me_systeme.gsv.onGetSerialNo", onGetSerialNo);
                session.subscribe("de.me_systeme.gsv.onGetDeviceHours", onGetDeviceHours);
                session.subscribe("de.me_systeme.gsv.onGetDataRate", onGetDataRate);
                session.subscribe("de.me_systeme.gsv.onWriteDataRate", onWriteDataRate);
                session.subscribe("de.me_systeme.gsv.onWriteSaveAll", onWriteSaveAll);
                session.subscribe("de.me_systeme.gsv.onGetFirmwareVersion", onGetFirmwareVersion);
                session.subscribe("de.me_systeme.gsv.onGetReadUserOffset", onGetReadUserOffset);
                session.subscribe("de.me_systeme.gsv.onWriteUserOffset", onWriteUserOffset);
                session.subscribe("de.me_systeme.gsv.onGetReadInputType", onGetReadInputType);

                debug_div = document.getElementById('debug_out');

                // try to get all cached informations and then get missing informations

                session.call('de.me_systeme.gsv.getErrors').then(function addErrors(res) {
                    var log_section = document.getElementById('debug_out');
                    res.forEach(function (entry) {
                        //console.log(entry);
                        log_section.innerHTML = '<p>' + entry + '</p>' + log_section.innerHTML;
                    });
                }, session.log);
                session.call("de.me_systeme.gsv.getGetIntetface");
                session.call("de.me_systeme.gsv.getReadUserOffset", [1]);
                session.call("de.me_systeme.gsv.getReadUserOffset", [2]);
                session.call("de.me_systeme.gsv.getReadUserOffset", [3]);
                session.call("de.me_systeme.gsv.getReadUserOffset", [4]);
                session.call("de.me_systeme.gsv.getReadUserOffset", [5]);
                session.call("de.me_systeme.gsv.getReadUserOffset", [6]);
                session.call("de.me_systeme.gsv.getReadUserScale", [1]);
                session.call("de.me_systeme.gsv.getReadUserScale", [2]);
                session.call("de.me_systeme.gsv.getReadUserScale", [3]);
                session.call("de.me_systeme.gsv.getReadUserScale", [4]);
                session.call("de.me_systeme.gsv.getReadUserScale", [5]);
                session.call("de.me_systeme.gsv.getReadUserScale", [6]);
                session.call("de.me_systeme.gsv.getUnitNo", [1]);
                session.call("de.me_systeme.gsv.getUnitNo", [2]);
                session.call("de.me_systeme.gsv.getUnitNo", [3]);
                session.call("de.me_systeme.gsv.getUnitNo", [4]);
                session.call("de.me_systeme.gsv.getUnitNo", [5]);
                session.call("de.me_systeme.gsv.getUnitNo", [6]);
                session.call("de.me_systeme.gsv.getSerialNo");
                session.call("de.me_systeme.gsv.getDeviceHours");
                session.call("de.me_systeme.gsv.getDataRate");
                session.call("de.me_systeme.gsv.getFirmwareVersion");
                session.call("de.me_systeme.gsv.getReadInputType", [1]);
                session.call("de.me_systeme.gsv.getReadInputType", [2]);
                session.call("de.me_systeme.gsv.getReadInputType", [3]);
                session.call("de.me_systeme.gsv.getReadInputType", [4]);
                session.call("de.me_systeme.gsv.getReadInputType", [5]);
                session.call("de.me_systeme.gsv.getReadInputType", [6]);
            };
            connection.open();

            $("input.modul_settings").keyup(onKeyUpConfigInputs);
            $("input.modul_settings").keydown(onKeyDownConfigInputs);
            $('select.unitNo').change(doneSelect);
        };

        function doneLoading() {
            $('#myPleaseWait').modal('hide');
            clearTimeout(loadConfigTimer);
        }

        function onKeyUpConfigInputs(e) {
            //console.log("up");
            //ESC==27
            //ENTER=13
            if ((e.which == 27) || (e.which == 13)) {
                return;
            }
            var inputID = $(this).data('id');
            clearTimeout(typingTimer);
            typingTimer[inputID] = setTimeout(function () {
                doneTyping(inputID);
            }, doneTypingInterval);
        }

        function onKeyDownConfigInputs(e) {
            //console.log("down");
            var inputID = $(this).data('id');
            clearTimeout(typingTimer[inputID]);

            //ESC==27
            //ENTER=13
            if (e.which == 27) {
                $('#' + inputID + '_value').val(modul_config[inputID].toFixed(4));
                setInputSuccess(inputID);
            } else if (($('#' + inputID + '_value').val() == '')) {
                setInputError(inputID);
            } else if ((e.which == 13) && (modul_config[inputID] != $('#' + inputID + '_value').val())) {
                // √ºbernehmen
                setInputWarning(inputID, "wird √ºbertragen...");
                window[setFunctionsByID[inputID]]();
            }
        }

        function doneTyping(inputID) {
            if (modul_config[inputID] != $('#' + inputID + '_value').val()) {
                setInputWarning(inputID);
            }
            else {
                setInputSuccess(inputID);
            }
        }

        function doneSelect(e) {
            var inputID = $(this).data('id');
            var index = $(this)[0].selectedIndex;
            var inputIDno = parseInt(inputID.charAt(inputID.length - 1))
            setInputWarning(inputID, "wird √ºbertragen...");
            session.call("de.me_systeme.gsv.WriteUnitNo", [inputIDno, index]);
        }
    </script>

</head>
<body>
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">ME-Me&szlig;systeme GmbH</a>
        </div>
        <div>
            <ul class="nav navbar-nav">
                <li><a href="index.html">Messung</a></li>
                <li class="active"><a href="#">Konfiguration</a></li>
                <li><a href="messungen.html">Messungen</a></li>
                <li><a href="#">Log</a></li>
                <!-- <li><a id="worker"><img src="images/ajax-loader_rechteck.gif" alt="loader_gif"></a></li> -->
            </ul>
        </div>
    </div>
</nav>
<!-- Loading Modal Start here-->
<div class="modal fade bs-example-modal-sm" id="myPleaseWait" tabindex="-1"
     role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">
                    <span class="glyphicon glyphicon-time">
                    </span> Konfiguration wird geladen...
                </h4>
            </div>
            <div class="modal-body">
                <div class="progress">
                    <div class="progress-bar progress-bar-info
                    progress-bar-striped active"
                         style="width: 100%">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Loading Modal ends Here -->
<!-- Error Modal Start here-->
<div class="modal fade bs-example-modal-sm" id="errorModal" tabindex="-1"
     role="dialog" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">
                    <span class="glyphicon glyphicon-alert">
                    </span> Ladetimeout erreicht
                </h4>
            </div>
            <div class="modal-body">
                <h3>Die Antwort-Queue wird zur&uuml;ckgesetzt</h3>

                <div class="progress">
                    <div class="progress-bar progress-bar-danger
                    progress-bar-striped active"
                         style="width: 100%">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Error Modal ends Here -->
<div class="container">

    <div class="well well-sm">Modul Info</div>

    <div class="row">
        <div class="col-sm-4 box">
            <table class="table table-condensed">
                <thead>
                <tr>
                    <th>Eigenschaft</th>
                    <th>Wert</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>genereller Schreibschutz</td>
                    <td id="ge_schreibschutz">-</td>
                </tr>
                <tr>
                    <td>Schnittstellen spzif. Schreibs.</td>
                    <td id="sp_schreibschutz"></td>
                </tr>
                <tr>
                    <td>Model</td>
                    <td id="model_name"></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-sm-4 box">
            <table class="table table-condensed">
                <thead>
                <tr>
                    <th>Eigenschaft</th>
                    <th>Wert</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>output-Datentype</td>
                    <td id="measure_datatype">-</td>
                </tr>
                <tr>
                    <td>aktive Kan&auml;le</td>
                    <td id="activeChannels">-</td>
                </tr>
                <tr>
                    <td>SerialNo</td>
                    <td id="serialNo">-</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-sm-4 box">
            <table class="table table-condensed">
                <thead>
                <tr>
                    <th>Eigenschaft</th>
                    <th>Wert</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Betriebstunden</td>
                    <td id="device_hours_counter">-</td>
                </tr>
                <tr>
                    <td>Firmware Version</td>
                    <td id="device_fw_version">-</td>
                </tr>
                <tr>
                    <td>Datenrate</td>
                    <td>
                        <div id="DataRate" class="form-group has-success has-feedback">
                            <input id="DataRate_value" data-id="DataRate" type="number" step="0.01"
                                   min="1"
                                   max="2500"
                                   class="form-control modul_settings">
                            <span class="badge badgeInsideInput">Hz</span>
                                    <span id="DataRate_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>

                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="well well-sm">Modul Settings</div>

    <div class="panel panel-default">
        <div class="panel-heading">Zero, Scaling, Einheiten</div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-3">
                    <table class="table">
                        <caption>UserOffset</caption>
                        <thead>
                        <tr>
                            <th>Kanal</th>
                            <th>Wert</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>
                                <div id="ReadUserOffset1" class="form-group has-success has-feedback">
                                    <input id="ReadUserOffset1_value" data-id="ReadUserOffset1" type="number"
                                           step="0.01"
                                           min="-400"
                                           max="400"
                                           class="form-control modul_settings">
                                    <span id="ReadUserOffset1_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>
                                <div id="ReadUserOffset2" class="form-group has-success has-feedback">
                                    <input id="ReadUserOffset2_value" data-id="ReadUserOffset2" type="number"
                                           step="0.01"
                                           min="-400"
                                           max="400"
                                           class="form-control modul_settings">
                                    <span id="ReadUserOffset2_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>
                                <div id="ReadUserOffset3" class="form-group has-success has-feedback">
                                    <input id="ReadUserOffset3_value" data-id="ReadUserOffset3" type="number"
                                           step="0.01"
                                           min="-400"
                                           max="400"
                                           class="form-control modul_settings">
                                    <span id="ReadUserOffset3_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>
                                <div id="ReadUserOffset4" class="form-group has-success has-feedback">
                                    <input id="ReadUserOffset4_value" data-id="ReadUserOffset4" type="number"
                                           step="0.01"
                                           min="-400"
                                           max="400"
                                           class="form-control modul_settings">
                                    <span id="ReadUserOffset4_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>
                                <div id="ReadUserOffset5" class="form-group has-success has-feedback">
                                    <input id="ReadUserOffset5_value" data-id="ReadUserOffset5" type="number"
                                           step="0.01"
                                           min="-400"
                                           max="400"
                                           class="form-control modul_settings">
                                    <span id="ReadUserOffset5_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>
                                <div id="ReadUserOffset6" class="form-group has-success has-feedback">
                                    <input id="ReadUserOffset6_value" data-id="ReadUserOffset6" type="number"
                                           step="0.01"
                                           min="-400"
                                           max="600"
                                           class="form-control modul_settings">
                                    <span id="ReadUserOffset6_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-sm-3">
                    <table class="table">
                        <caption>UserScale</caption>
                        <thead>
                        <tr>
                            <th>Kanal</th>
                            <th>Wert</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>
                                <div id="ReadUserScale1" class="form-group has-success has-feedback">
                                    <input id="ReadUserScale1_value" data-id="ReadUserScale1" type="number" step="1"
                                           min="0"
                                           max="1000"
                                           class="form-control modul_settings">
                                    <span id="ReadUserScale1_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>
                                <div id="ReadUserScale2" class="form-group has-success has-feedback">
                                    <input id="ReadUserScale2_value" data-id="ReadUserScale2" type="number" step="1"
                                           min="0"
                                           max="1000"
                                           class="form-control modul_settings">
                                    <span id="ReadUserScale2_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>
                                <div id="ReadUserScale3" class="form-group has-success has-feedback">
                                    <input id="ReadUserScale3_value" data-id="ReadUserScale3" type="number" step="1"
                                           min="0"
                                           max="1000"
                                           class="form-control modul_settings">
                                    <span id="ReadUserScale3_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>
                                <div id="ReadUserScale4" class="form-group has-success has-feedback">
                                    <input id="ReadUserScale4_value" data-id="ReadUserScale4" type="number" step="1"
                                           min="0"
                                           max="1000"
                                           class="form-control modul_settings">
                                    <span id="ReadUserScale4_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>
                                <div id="ReadUserScale5" class="form-group has-success has-feedback">
                                    <input id="ReadUserScale5_value" data-id="ReadUserScale5" type="number" step="1"
                                           min="0"
                                           max="1000"
                                           class="form-control modul_settings">
                                    <span id="ReadUserScale5_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>
                                <div id="ReadUserScale6" class="form-group has-success has-feedback">
                                    <input id="ReadUserScale6_value" data-id="ReadUserScale6" type="number" step="1"
                                           min="0"
                                           max="1000"
                                           max="1000"
                                           class="form-control modul_settings">
                                    <span id="ReadUserScale6_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback"></span>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-sm-3">
                    <table class="table">
                        <caption>Einheiten</caption>
                        <thead>
                        <tr>
                            <th>Kanal</th>
                            <th>Einheit</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td>
                                <div id="UnitNo1" class="form-group has-success has-feedback">
                                    <select id="UnitNo1_value" data-id="UnitNo1" class="form-control unitNo">
                                        <option>mV/V</option>
                                        <option>kg</option>
                                        <option>g</option>
                                        <option>N</option>
                                        <option>cN</option>
                                        <option>V</option>
                                        <option>¬µm/m</option>
                                        <option>(keine)</option>
                                        <option>t</option>
                                        <option>kN</option>
                                        <option>lb</option>
                                        <option>oz</option>
                                        <option>kp</option>
                                        <option>lbf</option>
                                        <option>pdl</option>
                                        <option>mm</option>
                                        <option>m</option>
                                        <option>cNm</option>
                                        <option>Nm</option>
                                        <option>¬∞C</option>
                                        <option>¬∞F</option>
                                        <option>K</option>
                                        <option>oztr</option>
                                        <option>dwt</option>
                                        <option>kNm</option>
                                        <option>%</option>
                                        <option>‚Ä∞</option>
                                        <option>W</option>
                                        <option>kW</option>
                                        <option>rpm</option>
                                        <option>bar</option>
                                        <option>Pa</option>
                                        <option>hPa</option>
                                        <option>MPa</option>
                                        <option>N/mm¬≤</option>
                                        <option>¬∞</option>
                                        <option>Hz</option>
                                        <option>m/s</option>
                                        <option>km/h</option>
                                        <option>m¬≥/h</option>
                                        <option>mA</option>
                                        <option>A</option>
                                        <option>m/s¬≤</option>
                                    </select>
                                    <span id="UnitNo1_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback select_gly"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>
                                <div id="UnitNo2" class="form-group has-success has-feedback">
                                    <select id="UnitNo2_value" data-id="UnitNo2" class="form-control unitNo">
                                        <option>mV/V</option>
                                        <option>kg</option>
                                        <option>g</option>
                                        <option>N</option>
                                        <option>cN</option>
                                        <option>V</option>
                                        <option>¬µm/m</option>
                                        <option>(keine)</option>
                                        <option>t</option>
                                        <option>kN</option>
                                        <option>lb</option>
                                        <option>oz</option>
                                        <option>kp</option>
                                        <option>lbf</option>
                                        <option>pdl</option>
                                        <option>mm</option>
                                        <option>m</option>
                                        <option>cNm</option>
                                        <option>Nm</option>
                                        <option>¬∞C</option>
                                        <option>¬∞F</option>
                                        <option>K</option>
                                        <option>oztr</option>
                                        <option>dwt</option>
                                        <option>kNm</option>
                                        <option>%</option>
                                        <option>‚Ä∞</option>
                                        <option>W</option>
                                        <option>kW</option>
                                        <option>rpm</option>
                                        <option>bar</option>
                                        <option>Pa</option>
                                        <option>hPa</option>
                                        <option>MPa</option>
                                        <option>N/mm¬≤</option>
                                        <option>¬∞</option>
                                        <option>Hz</option>
                                        <option>m/s</option>
                                        <option>km/h</option>
                                        <option>m¬≥/h</option>
                                        <option>mA</option>
                                        <option>A</option>
                                        <option>m/s¬≤</option>
                                    </select>
                                    <span id="UnitNo2_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback select_gly"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>
                                <div id="UnitNo3" class="form-group has-success has-feedback">
                                    <select id="UnitNo3_value" data-id="UnitNo3" class="form-control unitNo">
                                        <option>mV/V</option>
                                        <option>kg</option>
                                        <option>g</option>
                                        <option>N</option>
                                        <option>cN</option>
                                        <option>V</option>
                                        <option>¬µm/m</option>
                                        <option>(keine)</option>
                                        <option>t</option>
                                        <option>kN</option>
                                        <option>lb</option>
                                        <option>oz</option>
                                        <option>kp</option>
                                        <option>lbf</option>
                                        <option>pdl</option>
                                        <option>mm</option>
                                        <option>m</option>
                                        <option>cNm</option>
                                        <option>Nm</option>
                                        <option>¬∞C</option>
                                        <option>¬∞F</option>
                                        <option>K</option>
                                        <option>oztr</option>
                                        <option>dwt</option>
                                        <option>kNm</option>
                                        <option>%</option>
                                        <option>‚Ä∞</option>
                                        <option>W</option>
                                        <option>kW</option>
                                        <option>rpm</option>
                                        <option>bar</option>
                                        <option>Pa</option>
                                        <option>hPa</option>
                                        <option>MPa</option>
                                        <option>N/mm¬≤</option>
                                        <option>¬∞</option>
                                        <option>Hz</option>
                                        <option>m/s</option>
                                        <option>km/h</option>
                                        <option>m¬≥/h</option>
                                        <option>mA</option>
                                        <option>A</option>
                                        <option>m/s¬≤</option>
                                    </select>
                                    <span id="UnitNo3_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback select_gly"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>
                                <div id="UnitNo4" class="form-group has-success has-feedback">
                                    <select id="UnitNo4_value" data-id="UnitNo4" class="form-control unitNo">
                                        <option>mV/V</option>
                                        <option>kg</option>
                                        <option>g</option>
                                        <option>N</option>
                                        <option>cN</option>
                                        <option>V</option>
                                        <option>¬µm/m</option>
                                        <option>(keine)</option>
                                        <option>t</option>
                                        <option>kN</option>
                                        <option>lb</option>
                                        <option>oz</option>
                                        <option>kp</option>
                                        <option>lbf</option>
                                        <option>pdl</option>
                                        <option>mm</option>
                                        <option>m</option>
                                        <option>cNm</option>
                                        <option>Nm</option>
                                        <option>¬∞C</option>
                                        <option>¬∞F</option>
                                        <option>K</option>
                                        <option>oztr</option>
                                        <option>dwt</option>
                                        <option>kNm</option>
                                        <option>%</option>
                                        <option>‚Ä∞</option>
                                        <option>W</option>
                                        <option>kW</option>
                                        <option>rpm</option>
                                        <option>bar</option>
                                        <option>Pa</option>
                                        <option>hPa</option>
                                        <option>MPa</option>
                                        <option>N/mm¬≤</option>
                                        <option>¬∞</option>
                                        <option>Hz</option>
                                        <option>m/s</option>
                                        <option>km/h</option>
                                        <option>m¬≥/h</option>
                                        <option>mA</option>
                                        <option>A</option>
                                        <option>m/s¬≤</option>
                                    </select>
                                    <span id="UnitNo4_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback select_gly"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>
                                <div id="UnitNo5" class="form-group has-success has-feedback">
                                    <select id="UnitNo5_value" data-id="UnitNo5" class="form-control unitNo">
                                        <option>mV/V</option>
                                        <option>kg</option>
                                        <option>g</option>
                                        <option>N</option>
                                        <option>cN</option>
                                        <option>V</option>
                                        <option>¬µm/m</option>
                                        <option>(keine)</option>
                                        <option>t</option>
                                        <option>kN</option>
                                        <option>lb</option>
                                        <option>oz</option>
                                        <option>kp</option>
                                        <option>lbf</option>
                                        <option>pdl</option>
                                        <option>mm</option>
                                        <option>m</option>
                                        <option>cNm</option>
                                        <option>Nm</option>
                                        <option>¬∞C</option>
                                        <option>¬∞F</option>
                                        <option>K</option>
                                        <option>oztr</option>
                                        <option>dwt</option>
                                        <option>kNm</option>
                                        <option>%</option>
                                        <option>‚Ä∞</option>
                                        <option>W</option>
                                        <option>kW</option>
                                        <option>rpm</option>
                                        <option>bar</option>
                                        <option>Pa</option>
                                        <option>hPa</option>
                                        <option>MPa</option>
                                        <option>N/mm¬≤</option>
                                        <option>¬∞</option>
                                        <option>Hz</option>
                                        <option>m/s</option>
                                        <option>km/h</option>
                                        <option>m¬≥/h</option>
                                        <option>mA</option>
                                        <option>A</option>
                                        <option>m/s¬≤</option>
                                    </select>
                                    <span id="UnitNo5_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback select_gly"></span>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>
                                <div id="UnitNo6" class="form-group has-success has-feedback">
                                    <select id="UnitNo6_value" data-id="UnitNo6" class="form-control unitNo">
                                        <option>mV/V</option>
                                        <option>kg</option>
                                        <option>g</option>
                                        <option>N</option>
                                        <option>cN</option>
                                        <option>V</option>
                                        <option>¬µm/m</option>
                                        <option>(keine)</option>
                                        <option>t</option>
                                        <option>kN</option>
                                        <option>lb</option>
                                        <option>oz</option>
                                        <option>kp</option>
                                        <option>lbf</option>
                                        <option>pdl</option>
                                        <option>mm</option>
                                        <option>m</option>
                                        <option>cNm</option>
                                        <option>Nm</option>
                                        <option>¬∞C</option>
                                        <option>¬∞F</option>
                                        <option>K</option>
                                        <option>oztr</option>
                                        <option>dwt</option>
                                        <option>kNm</option>
                                        <option>%</option>
                                        <option>‚Ä∞</option>
                                        <option>W</option>
                                        <option>kW</option>
                                        <option>rpm</option>
                                        <option>bar</option>
                                        <option>Pa</option>
                                        <option>hPa</option>
                                        <option>MPa</option>
                                        <option>N/mm¬≤</option>
                                        <option>¬∞</option>
                                        <option>Hz</option>
                                        <option>m/s</option>
                                        <option>km/h</option>
                                        <option>m¬≥/h</option>
                                        <option>mA</option>
                                        <option>A</option>
                                        <option>m/s¬≤</option>
                                    </select>
                                    <span id="UnitNo6_glyphicon"
                                          class="glyphicon glyphicon-ok form-control-feedback select_gly"></span>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-sm-3">
                    <table class="table">
                        <caption>InputType</caption>
                        <thead>
                        <tr>
                            <th>Kanal</th>
                            <th>Wert</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>1</td>
                            <td id="ReadInputType1">-</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td id="ReadInputType2">-</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td id="ReadInputType3">-</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td id="ReadInputType4">-</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td id="ReadInputType5">-</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td id="ReadInputType6">-</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="panel panel-danger">
        <div class="panel-heading">Danger-Zone</div>
        <div class="panel-body">
            <button id="btn-saveAll" type="button" class="btn btn-warning" onclick="WriteSaveAll()">SaveAll</button>
        </div>
    </div>

    <div class="panel panel-primary">
        <div class="panel-heading">Debug
            <div id="event-cnt" style="float:right;">-</div>
        </div>
        <div id="debug_out" class="panel-body" style="max-height: 200px;overflow-y: scroll;"></div>
    </div>
</div>
</div>
</div>
</body>
</html>